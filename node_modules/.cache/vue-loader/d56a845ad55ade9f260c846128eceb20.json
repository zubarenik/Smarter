{"remainingRequest":"/home/nikita/VSCodeProjects/smarter/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nikita/VSCodeProjects/smarter/src/views/CreateCourse.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nikita/VSCodeProjects/smarter/src/views/CreateCourse.vue","mtime":1580049399780},{"path":"/home/nikita/VSCodeProjects/smarter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/smarter/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/smarter/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/nikita/VSCodeProjects/smarter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/VSCodeProjects/smarter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWydzY2hvb2xBQkknLCAnY291cnNlQUJJJywgJ3NjaG9vbEFkZHJlc3MnXSwKICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgICAgdmFsaWQ6IHRydWUsCiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICB0aXRsZVJ1bGVzOiBbCiAgICAgICAgICAgICAgdiA9PiAhIXYgfHwgJ1RpdGxlIGlzIHJlcXVpcmVkJywKICAgICAgICAgICAgICB2ID0+ICh2ICYmIHYubGVuZ3RoIDw9IDUwKSB8fCAnVGl0bGUgbXVzdCBiZSBsZXNzIHRoYW4gNTAgY2hhcmFjdGVycycsCiAgICAgICAgICBdLAogICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgZGVzY3JpcHRpb25SdWxlczogWwogICAgICAgICAgICAgIHYgPT4gISF2IHx8ICdEZXNjcmlwdGlvbiBpcyByZXF1aXJlZCcsCiAgICAgICAgICBdLAogICAgICAgICAgY29zdDogJycsCiAgICAgICAgICBjb3N0UnVsZXM6IFsKICAgICAgICAgICAgICB2ID0+ICEhdiB8fCAnQ29zdCBpcyByZXF1aXJlZCcsCiAgICAgICAgICAgICAgdiA9PiAhaXNOYU4odikgfHwgJ0Nvc3QgbXVzdCBiZSBhIG51bWJlciEnLAogICAgICAgICAgXSwKICAgICAgICAgIGNoZWNrYm94OiBmYWxzZSwKICAgICAgfQogIH0sCiAgbWV0aG9kczogewogICAgICBzdWJtaXQgKCkgewogICAgICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKXsKICAgICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZQoKICAgICAgICAgICAgICBsZXQgV2ViMyA9IHJlcXVpcmUoJ3dlYjMnKQogICAgICAgICAgICAgIGxldCB3ZWIzID0gbmV3IFdlYjMoJ2h0dHBzOi8vcm9wc3Rlbi5pbmZ1cmEuaW8vdjMvYjhlMjMxNjU5NWY4NDgxNGEzM2FkMmM3MWQxZGVmNDknKSAgICAgICAgICAgICAgIAogICAgICAgICAgICAgIGxldCBUeCA9IHJlcXVpcmUoJ2V0aGVyZXVtanMtdHgnKS5UcmFuc2FjdGlvbgoKICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gJzB4ZTYxYTNiZjkyMDQxNDkxZTYxRmJiRjE5MWUyOTdFOTZCM2ZBZjdjQicKICAgICAgICAgICAgICBjb25zdCBwcml2YXRlS2V5ID0gQnVmZmVyLmZyb20oJ2E2ZmE5NWEzOWQ3NTgxMTc4MDk1YTZkMmJlZmI2OGNjOWUyMmM3ZWNjNGY0ODQ4ZTk3OTFhOWYwZGFjNmEyMzEnLCAnaGV4JykKCiAgICAgICAgICAgICAgbGV0IGNvbnRyYWN0U2Nob29sID0gbmV3IHdlYjMuZXRoLkNvbnRyYWN0KHRoaXMuc2Nob29sQUJJLCB0aGlzLnNjaG9vbEFkZHJlc3MpCgogICAgICAgICAgICAgIHdlYjMuZXRoLmdldFRyYW5zYWN0aW9uQ291bnQoYWNjb3VudCwgKGVyciwgdHhDb3VudCkgPT4gewogICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGNvbnRyYWN0U2Nob29sLm1ldGhvZHMuYWRkQ291cnNlKHBhcnNlSW50KHRoaXMuY29zdCksIHRoaXMudGl0bGUsIHRoaXMuZGVzY3JpcHRpb24pLmVuY29kZUFCSSgpCiAgICAgICAgICAgICAgICAgIGxldCB0eE9iamVjdCA9IHsKICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IDMsCiAgICAgICAgICAgICAgICAgICAgICBub25jZTogd2ViMy51dGlscy50b0hleCh0eENvdW50KSwKICAgICAgICAgICAgICAgICAgICAgIGdhc0xpbWl0OiB3ZWIzLnV0aWxzLnRvSGV4KDMwMDAwMCksCiAgICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogd2ViMy51dGlscy50b0hleCh3ZWIzLnV0aWxzLnRvV2VpKCcxMCcsICdnd2VpJykpLAogICAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMuc2Nob29sQWRkcmVzcywKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgbGV0IHR4ID0gbmV3IFR4KHR4T2JqZWN0LCB7Y2hhaW46ICdyb3BzdGVuJ30pCiAgICAgICAgICAgICAgICAgIHR4LnNpZ24ocHJpdmF0ZUtleSkKCiAgICAgICAgICAgICAgICAgIGxldCBzZXJpYWxpemVkVHggPSB0eC5zZXJpYWxpemUoKQogICAgICAgICAgICAgICAgICBsZXQgcmF3ID0gJzB4JyArIHNlcmlhbGl6ZWRUeC50b1N0cmluZygnaGV4JykKCiAgICAgICAgICAgICAgICAgIHdlYjMuZXRoLnNlbmRTaWduZWRUcmFuc2FjdGlvbihyYXcsIChlcnIsIHR4SGFzaCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyciwgdHhIYXNoKQogICAgICAgICAgICAgICAgICB9KSAgICAgIAogICAgICAgICAgICAgIH0pICAgICAgCiAgICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlc2V0ICgpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpCiAgICAgIH0sCiAgICAgIHJlc2V0VmFsaWRhdGlvbiAoKSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCkKICAgICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["CreateCourse.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateCourse.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-form\n        ref=\"form\"\n        v-model=\"valid\"\n        lazy-validation\n        style=\"margin-top: 70px\"\n    >\n        <v-text-field\n            v-model=\"title\"\n            counter=\"50\"\n            :rules=\"titleRules\"\n            label=\"Title\"\n            required\n        ></v-text-field>\n        <v-text-field\n            v-model=\"description\"\n            :rules=\"descriptionRules\"\n            label=\"Description\"\n            required\n        ></v-text-field>\n        <v-text-field\n            v-model=\"cost\"\n            :rules=\"costRules\"\n            label=\"Cost\"\n            required\n        ></v-text-field>\n        <v-checkbox\n            v-model=\"checkbox\"\n            :rules=\"[v => !!v || 'You must agree to continue!']\"\n            label=\"Do you agree?\"\n            required\n        ></v-checkbox>\n        <v-btn\n            :disabled=\"!valid\"\n            color=\"success\"\n            class=\"mr-4\"\n            @click=\"submit\"\n        >\n            Submit\n        </v-btn>\n        <v-btn\n            color=\"error\"\n            class=\"mr-4\"\n            @click=\"reset\"\n        >\n            Reset Form\n        </v-btn>\n        <v-btn\n            color=\"warning\"\n            @click=\"resetValidation\"\n        >\n            Reset Validation\n        </v-btn>\n    </v-form>\n</template>\n\n<script>\n  export default {\n    props: ['schoolABI', 'courseABI', 'schoolAddress'],\n    data() {\n        return {\n            valid: true,\n            title: '',\n            titleRules: [\n                v => !!v || 'Title is required',\n                v => (v && v.length <= 50) || 'Title must be less than 50 characters',\n            ],\n            description: '',\n            descriptionRules: [\n                v => !!v || 'Description is required',\n            ],\n            cost: '',\n            costRules: [\n                v => !!v || 'Cost is required',\n                v => !isNaN(v) || 'Cost must be a number!',\n            ],\n            checkbox: false,\n        }\n    },\n    methods: {\n        submit () {\n            if (this.$refs.form.validate()){\n                this.snackbar = true\n\n                let Web3 = require('web3')\n                let web3 = new Web3('https://ropsten.infura.io/v3/b8e2316595f84814a33ad2c71d1def49')               \n                let Tx = require('ethereumjs-tx').Transaction\n\n                const account = '0xe61a3bf92041491e61FbbF191e297E96B3fAf7cB'\n                const privateKey = Buffer.from('a6fa95a39d7581178095a6d2befb68cc9e22c7ecc4f4848e9791a9f0dac6a231', 'hex')\n\n                let contractSchool = new web3.eth.Contract(this.schoolABI, this.schoolAddress)\n\n                web3.eth.getTransactionCount(account, (err, txCount) => {\n                    let data = contractSchool.methods.addCourse(parseInt(this.cost), this.title, this.description).encodeABI()\n                    let txObject = {\n                        chainId: 3,\n                        nonce: web3.utils.toHex(txCount),\n                        gasLimit: web3.utils.toHex(300000),\n                        gasPrice: web3.utils.toHex(web3.utils.toWei('10', 'gwei')),\n                        to: this.schoolAddress,\n                        data: data\n                    }\n\n                    let tx = new Tx(txObject, {chain: 'ropsten'})\n                    tx.sign(privateKey)\n\n                    let serializedTx = tx.serialize()\n                    let raw = '0x' + serializedTx.toString('hex')\n\n                    web3.eth.sendSignedTransaction(raw, (err, txHash) => {\n                        // eslint-disable-next-line no-console\n                        console.log(err, txHash)\n                    })      \n                })      \n            }\n        },\n        reset () {\n            this.$refs.form.reset()\n        },\n        resetValidation () {\n            this.$refs.form.resetValidation()\n        },\n    },\n  }\n</script>"]}]}